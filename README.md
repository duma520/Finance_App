# 软件截图：

![image](https://github.com/user-attachments/assets/3051a060-e670-4835-a013-858ba69aa687)


# 人民币收支管理系统 - 全方位使用说明书

## 目录

1. [项目概述](#项目概述)
2. [适用人群](#适用人群)
3. [核心功能](#核心功能)
4. [详细使用指南](#详细使用指南)
   - [4.1 安装与启动](#41-安装与启动)
   - [4.2 用户管理](#42-用户管理)
   - [4.3 主界面介绍](#43-主界面介绍)
   - [4.4 记录交易](#44-记录交易)
   - [4.5 账户管理](#45-账户管理)
   - [4.6 分类管理](#46-分类管理)
   - [4.7 预算管理](#47-预算管理)
   - [4.8 借款还款管理](#48-借款还款管理)
   - [4.9 数据统计与分析](#49-数据统计与分析)
   - [4.10 数据备份与恢复](#410-数据备份与恢复)
   - [4.11 高级功能](#411-高级功能)
5. [专业用户指南](#专业用户指南)
6. [应用场景举例](#应用场景举例)
7. [常见问题解答](#常见问题解答)
8. [版本更新历史](#版本更新历史)
9. [技术支持与反馈](#技术支持与反馈)
10. [版权与许可](#版权与许可)

## 项目概述

人民币收支管理系统是一款功能完善的个人/家庭财务记账工具，由杜玛开发并维护。它采用现代GUI界面设计，支持多用户、多账户管理，提供全面的财务记录、统计分析和预算管理功能。

**核心价值**：
- 帮助个人和家庭建立科学的财务管理习惯
- 清晰掌握收入来源和支出去向
- 有效控制消费，实现储蓄目标
- 管理借款还款，维护良好信用
- 通过数据分析优化财务决策

## 适用人群

本系统设计考虑了各类用户需求，适合：

### 个人用户
- **学生**：管理生活费、兼职收入，培养理财意识
- **上班族**：追踪工资、奖金、日常开支，规划储蓄
- **自由职业者**：记录项目收入、业务支出，管理不规律现金流
- **退休人员**：管理养老金、医疗支出，确保财务安全

### 家庭用户
- **新婚夫妇**：共同管理家庭财务，协调支出
- **有孩家庭**：记录教育支出，规划子女教育基金
- **多代同堂家庭**：管理大家庭的复杂收支

### 专业人士
- **财务人员**：个人财务管理的专业工具
- **小企业主**：简易的生意账目管理（非专业会计用途）
- **理财顾问**：为客户提供基础财务分析的工具

### 特殊需求用户
- **有借款往来**：清晰记录谁借了钱、谁还了钱
- **多账户管理**：管理多个银行账户、电子钱包、现金
- **预算控制**：需要严格控制支出的用户

## 核心功能

### 基础功能
1. **收支记录**：记录收入、支出、借款、还款等各类财务交易
2. **多账户管理**：支持多个账户的余额跟踪
3. **分类系统**：内置常用分类，支持自定义
4. **数据可视化**：图表展示收支趋势和分类占比

### 进阶功能
1. **预算管理**：设置月度预算，监控执行情况
2. **借款跟踪**：记录借款状态（待还/已结清）
3. **定期交易**：设置周期性自动记账
4. **数据加密**：保护财务隐私
5. **收据管理**：关联交易与收据图片

### 专业功能
1. **多货币支持**：基础汇率转换功能
2. **数据导出**：支持CSV/Excel格式
3. **数据库管理**：备份、恢复、加密
4. **操作历史**：支持撤销操作

## 详细使用指南

### 4.1 安装与启动

#### Windows用户
1. 确保已安装Python 3.7或更高版本
2. 打开命令提示符，安装依赖库：
   ```
   pip install PyQt5 sqlite3 pypinyin pillow cryptography python-dateutil
   ```
3. 下载`Finance_App.py`文件
4. 双击运行或使用命令`python Finance_App.py`

#### macOS/Linux用户
1. 确保已安装Python 3
2. 终端中安装依赖：
   ```
   pip3 install PyQt5 pypinyin pillow cryptography python-dateutil
   ```
3. 运行：
   ```
   python3 Finance_App.py
   ```

**首次启动**：系统会自动创建必要的数据库文件，包括：
- `finance_master.db`：主数据库，存储用户信息
- `finance_[用户名].db`：各用户的财务数据

### 4.2 用户管理

#### 创建新用户
1. 启动程序后，在登录界面选择"创建新用户"
2. 输入用户名和密码（可选）
3. 点击确定完成创建

**专业提示**：为保护隐私，可为数据库设置密码加密。加密后每次登录需输入密码才能访问数据。

#### 切换用户
1. 点击菜单栏"文件"→"切换用户"
2. 选择已有用户或创建新用户
3. 输入密码（如设置了加密）

**安全建议**：不同家庭成员应使用不同用户账号，实现数据隔离。

### 4.3 主界面介绍

主界面分为四个主要区域：

1. **顶部功能区**：
   - 搜索框：支持金额、分类、描述、拼音首字母搜索
   - 筛选器：按类型、分类、账户、状态筛选
   - 日期范围选择：快速选择常用时间范围或自定义

2. **中间标签页**：
   - 交易记录：显示所有财务交易
   - 统计分析：可视化数据图表和统计表格
   - 账户结余：各账户余额汇总

3. **底部输入区**：
   - 交易类型选择（收入/支出/借款/还款/余额）
   - 金额、分类、账户、日期等字段
   - 添加收据图片按钮

4. **操作按钮区**：
   - 添加/编辑/删除记录
   - 标记结算状态
   - 查看收据
   - 刷新数据

### 4.4 记录交易

#### 记录收入
1. 类型选择"收入"
2. 输入金额（如：5000）
3. 选择分类（如：工资）
4. 选择账户（如：工资卡）
5. 输入描述（如：五月工资）
6. 点击"添加记录"

**示例**：自由职业者可记录不同项目的收入，分类设为"项目A"、"项目B"等。

#### 记录支出
1. 类型选择"支出"
2. 输入金额（如：35.5）
3. 选择分类（如：餐饮）
4. 选择账户（如：电子钱包）
5. 输入描述（如：午餐外卖）
6. 可添加标签（如：工作餐）
7. 点击"添加记录"

**小技巧**：使用标签标记特殊支出，如"商务"、"个人"、"家庭"等，便于后期筛选。

#### 记录借款
1. 类型选择"借款"
2. 输入借款金额（如：2000）
3. 分类建议选"其他"或自定义分类
4. 选择资金来源账户
5. 输入借款人信息和借款日期
6. 可添加备注（如：借给张三购房首付）
7. 点击"添加记录"

**专业管理**：系统会自动标记为"待还款"，还款后可更新状态。

#### 记录还款
1. 类型选择"还款"
2. 输入还款金额（如：500）
3. 关联对应的借款记录
4. 选择还款账户
5. 输入还款日期
6. 点击"添加记录"

**自动计算**：系统会自动计算剩余待还金额，当全部还清时会标记借款为"已结清"。

#### 记录余额（专业功能）
1. 类型选择"余额"
2. 选择日期
3. 系统自动计算并记录所有账户总余额

**使用场景**：月末对账时记录总资产状况，便于长期趋势分析。

### 4.5 账户管理

#### 添加账户
1. 点击"编辑"→"管理账户"
2. 点击"添加"按钮
3. 输入账户名称（如：招商银行信用卡）
4. 设置初始余额（如：5000）
5. 选择货币类型（默认CNY）
6. 可添加描述信息
7. 点击确定

**账户类型建议**：
- 现金账户：日常钱包现金
- 银行账户：储蓄卡/信用卡
- 电子钱包：支付宝、微信支付等
- 投资账户：股票、基金等（仅记录余额）

#### 账户间转账（专业操作）
1. 记录一笔"支出"：从A账户转出
2. 记录一笔"收入"：到B账户转入
3. 使用相同金额和日期
4. 描述中注明"转账至B账户"/"从A账户转入"

**对账提示**：每月核对各账户余额是否与实际一致，可使用"余额"功能记录对账结果。

### 4.6 分类管理

#### 添加分类
1. 点击"编辑"→"管理分类"
2. 点击"添加"按钮
3. 输入分类名称（如：子女教育）
4. 选择类型（收入/支出）
5. 点击确定

**分类设计技巧**：
- 层级分类：使用"主分类:子分类"格式，如"交通:汽油"、"交通:公交"
- 项目分类：自由职业者可按项目设置分类
- 家庭成员分类："张三-餐饮"、"李四-服装"便于AA制核算

#### 分类合并（专业操作）
如需合并分类：
1. 导出数据为CSV
2. 在Excel中使用替换功能修改分类名称
3. 删除旧分类
4. 导入修改后的数据

### 4.7 预算管理

#### 设置月度预算
1. 点击"编辑"→"管理预算"
2. 选择月份（默认当前月）
3. 点击"添加预算"
4. 选择分类（如：餐饮）
5. 输入预算金额（如：1500）
6. 点击确定

**预算策略**：
- 50/30/20法则：必要支出50%，想要支出30%，储蓄20%
- 信封预算法：为每个分类设置固定预算
- 浮动预算法：根据收入变化调整预算

#### 监控预算执行
1. 在"统计分析"标签页选择"预算执行"
2. 查看各分类实际支出与预算对比
3. 红色标记表示超支

**专业分析**：导出预算数据到Excel，计算各月波动率，找出非常规支出。

### 4.8 借款还款管理

#### 完整借款流程示例
1. 记录借款：
   - 类型：借款
   - 金额：10000
   - 分类：其他
   - 账户：现金
   - 描述：借给李四装修款
   - 状态自动设为"待还款"

2. 记录部分还款：
   - 类型：还款
   - 金额：3000
   - 关联借款记录
   - 账户：支付宝
   - 描述：李四首期还款

3. 系统自动计算：
   - 剩余待还：7000
   - 状态仍为"待还款"

4. 记录全额还款：
   - 再次还款7000
   - 系统自动标记原借款为"已结清"

**法律提示**：大额借款建议导出记录作为辅助证据，但不可替代正式借条。

### 4.9 数据统计与分析

#### 收支趋势分析
1. 切换到"统计分析"标签页
2. 图表类型选择"收支趋势"
3. 设置时间范围
4. 查看收入与支出的月度变化

**商业应用**：个体商户可分析淡旺季，合理安排库存和促销。

#### 分类占比分析
1. 选择"分类占比"图表
2. 查看各类支出的比例
3. 点击饼图区块查看具体数值

**优化建议**：占比过高的非必要支出类别可作为节省重点。

#### 自定义统计
1. 导出数据到Excel
2. 使用数据透视表进行多维度分析
3. 制作自定义报表

**高级分析**：
- 年度同比分析
- 消费习惯聚类分析
- 现金流预测模型

### 4.10 数据备份与恢复

#### 自动备份
- 系统每小时自动备份一次
- 备份文件保存在程序目录下的backups文件夹
- 文件名格式：finance_[用户名]_auto_[时间].db

#### 手动备份
1. 点击"文件"→"备份"→"手动备份"
2. 选择保存位置
3. 备份完成会有提示

#### 恢复数据
1. 点击"文件"→"恢复数据"
2. 选择备份文件
3. 确认覆盖当前数据

**灾难恢复计划**：
1. 每月将备份文件复制到外部存储
2. 重要数据变更前手动备份
3. 考虑云存储备份（需先加密）

### 4.11 高级功能

#### 数据加密
1. 点击"文件"→"加密数据库"
2. 设置密码
3. 后续登录需输入密码

**安全警告**：忘记密码将无法恢复数据，请妥善保管。

#### 定期交易
1. 添加交易时勾选"定期交易"
2. 设置频率（每日/每周/每月/每年）
3. 设置结束日期
4. 系统会在到期时提醒执行

**应用场景**：
- 每月房租支出
- 定期工资收入
- 年度保险费

#### 汇率转换
1. 点击"工具"→"汇率转换"
2. 输入金额和货币种类
3. 查看转换结果
4. 可设置自定义汇率

**海外消费记录**：记录外币交易时，可转换为人民币统一核算。

## 专业用户指南

### 数据库结构
```
transactions 表结构：
- id: 唯一标识
- type: 类型(income/expense/loan/repayment/balance)
- amount: 金额
- category: 分类
- description: 描述
- date: 日期
- related_id: 关联ID（用于借款还款）
- status: 状态(pending/settled)
- account_id: 账户ID
- tags: 标签（逗号分隔）
- receipt_image: 收据图片base64
- is_recurring: 是否定期
- recurring_freq: 定期频率
- recurring_end: 定期结束日期
```

### 数据导入导出
1. **CSV格式**：
   - 包含所有字段的纯文本格式
   - 可用Excel编辑
   - 编码为UTF-8

2. **Excel格式**：
   - 使用openpyxl库生成
   - 保留数据类型
   - 适合进一步分析

**批量导入**：通过编辑CSV文件后替换数据库实现批量导入。

### 多用户协作模式
1. 为每位家庭成员创建单独用户
2. 定期导出各自数据
3. 在Excel中合并分析全家财务状况

### 开发者API
通过直接操作SQLite数据库可实现：
- 自定义报表生成
- 与其他系统集成
- 自动化数据处理

**注意**：直接操作数据库有风险，建议先备份。

## 应用场景举例

### 学生生活费管理
1. **收入**：
   - 父母转账：每月1日，分类"生活费"
   - 兼职收入：不定期，分类"兼职"

2. **支出**：
   - 餐饮：每日记录，分类"餐饮"
   - 学习资料：分类"教育"
   - 娱乐：分类"娱乐"，设置月度预算

3. **分析**：
   - 查看餐饮占比是否合理
   - 监控娱乐支出是否超支
   - 学期末统计总收支

### 家庭财务管理
1. **账户设置**：
   - 联名账户
   - 个人账户
   - 家庭公共账户

2. **分类设计**：
   - 按家庭成员：张三-服装、李四-交通
   - 按支出性质：房贷、水电、日用品

3. **预算控制**：
   - 设置家庭总预算
   - 分配各成员预算
   - 每月家庭财务会议分析执行情况

### 自由职业者
1. **项目分类**：
   - 按客户或项目设置分类
   - 记录项目收入和项目相关支出

2. **税务准备**：
   - 标记可抵扣支出
   - 导出年度数据供报税使用

3. **现金流预测**：
   - 分析收入周期性
   - 预留税款和社保资金

### 小微企业简易账务
1. **账户设置**：
   - 对公账户
   - 老板个人账户（用于业务）
   - 现金账户

2. **分类设计**：
   - 营业收入
   - 材料采购
   - 员工工资
   - 办公费用

3. **财务监控**：
   - 毛利率计算（收入-直接成本）
   - 月度盈亏分析
   - 现金流预警

## 常见问题解答

### 一般问题
**Q：程序无法启动怎么办？**
A：
1. 确认已安装所有依赖库
2. 检查Python版本是否为3.7+
3. 查看错误信息，搜索解决方案

**Q：如何迁移到新电脑？**
A：
1. 备份数据库文件（finance_*.db）
2. 复制程序文件和新电脑
3. 安装相同依赖库
4. 恢复备份

### 数据管理
**Q：误删了记录怎么办？**
A：
1. 使用"撤销"功能恢复最近操作
2. 从备份文件恢复
3. 如已关闭程序，可使用SQLite工具尝试恢复

**Q：如何合并两个分类？**
A：
1. 导出数据为CSV
2. 在Excel中替换分类名称
3. 删除旧分类
4. 导入修改后数据

### 功能使用
**Q：借款还清后状态没自动更新？**
A：
1. 检查还款总额是否≥借款金额
2. 确认还款记录的"关联ID"指向正确借款
3. 手动更新状态："选中借款→标记为已结算"

**Q：定期交易没有自动执行？**
A：
1. 系统只提醒，不自动记账
2. 到期后需手动确认执行
3. 检查结束日期是否已过

### 高级问题
**Q：如何增加新的货币类型？**
A：
1. 直接在新账户的货币栏输入代码
2. 汇率转换功能支持自定义货币

**Q：数据库损坏如何修复？**
A：
1. 尝试从备份恢复
2. 使用SQLite修复工具
3. 导出可用数据重建数据库

## 版本更新历史

### 版本3.12.0 (2025-05-26)
- 新增账户结余标签页，集中显示各账户财务状况
- 优化余额计算逻辑，支持自动更新后续余额记录
- 增强数据加密功能，提升安全性
- 修复定期交易执行日期的计算错误
- 改进统计图表显示效果

### 版本3.11.0 (2025-04-15)
- 新增汇率转换工具
- 支持多货币账户管理
- 优化预算管理界面
- 修复分类筛选问题
- 提升大数据量下的性能

### 版本3.10.0 (2025-03-01)
- 新增定期交易管理功能
- 增强数据备份选项
- 改进用户界面配色方案
- 优化内存使用效率
- 修复若干小错误

### 早期版本
- 3.0.0：全面重构，引入现代UI设计
- 2.x系列：功能增强和稳定性改进
- 1.x系列：基础版本开发

完整更新日志请查看GitHub仓库的CHANGELOG.md文件。

## 技术支持与反馈

我们提供以下支持渠道：

1. **GitHub Issues**：报告问题或建议功能
   - 访问：https://github.com/duma520/issues
   - 按照模板提交问题，包含详细描述和重现步骤

2. **文档更新**：查看最新使用说明
   - 项目Wiki页面
   - README文件

3. **社区支持**：与其他用户交流经验
   - GitHub Discussions
   - 相关技术论坛

**注意**：我们不提供私人邮箱支持，所有交流都在公开平台进行，以便其他用户也能受益。

## 版权与许可

**版权声明** © 永久 杜玛 保留所有权利

**许可证**：MIT License

**许可范围**：
- 允许个人和商业使用
- 允许修改和分发
- 允许私人部署
- 需保留版权声明

**限制**：
- 不得用于违法用途
- 不得去除版权信息
- 不得声称原创

**免责声明**：
本软件按"原样"提供，作者不承担任何直接或间接责任。用户应自行备份重要数据。

---

*文档最后更新：2025年5月28日*
*随着软件更新，本说明书内容可能会有所调整，请以最新版本为准*
