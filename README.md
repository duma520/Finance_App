# 人民币收支管理系统 - 全面使用说明书

![image](https://github.com/user-attachments/assets/16296e97-9618-4825-9e0f-a4bf2682f5c2)


## 版权声明
© 2025 杜玛 版权所有
永久保留所有权利
项目地址: [https://github.com/duma520](https://github.com/duma520)
问题报告: 通过GitHub Issues提交

## 目录
1. [简介](#简介)
2. [快速入门](#快速入门)
3. [功能详解](#功能详解)
4. [专业配置](#专业配置)
5. [技术架构](#技术架构)
6. [版本更新](#版本更新)
7. [常见问题](#常见问题)
8. [安全与隐私](#安全与隐私)
9. [高级技巧](#高级技巧)
10. [开发者指南](#开发者指南)

---

## 1. 简介 <a name="简介"></a>

### 1.1 什么是人民币收支管理系统？
人民币收支管理系统是一款功能完善的个人/家庭财务记账工具，帮助您轻松管理日常收支、借款还款等财务活动。

### 1.2 适用人群
- **个人用户**：记录日常收支，了解消费习惯
- **家庭主妇/主夫**：管理家庭财务，规划预算
- **小微企业主**：简单记账，跟踪资金流动
- **财务爱好者**：分析收支趋势，优化理财策略

### 1.3 主要特点
✅ 多用户支持，数据隔离存储
✅ 智能分类管理，支持自定义分类
✅ 借款还款跟踪管理
✅ 强大的统计分析和报表功能
✅ 数据备份与恢复机制
✅ 操作历史撤销功能

---

## 2. 快速入门 <a name="快速入门"></a>

### 2.1 安装与启动
1. 确保已安装Python 3.7+
2. 安装依赖：`pip install PyQt5 pypinyin`
3. 运行程序：`python Finance_App.py`

### 2.2 首次使用
1. **选择用户**：首次启动会提示选择或创建新用户
2. **添加记录**：
   - 选择交易类型（收入/支出/借款/还款）
   - 输入金额和描述
   - 选择分类和日期
   - 点击"添加记录"按钮

### 2.3 基本操作
- **查看记录**：在主表格中浏览所有交易
- **搜索记录**：使用顶部搜索栏快速查找
- **删除记录**：选中记录后点击"删除记录"
- **统计分析**：切换到"统计分析"标签页查看图表

---

## 3. 功能详解 <a name="功能详解"></a>

### 3.1 交易管理
#### 收入记录
- 用于记录工资、奖金等现金流入
- 示例：记录每月工资收入

#### 支出记录
- 用于记录日常消费
- 示例：记录超市购物支出

#### 借款管理
- 记录借出的款项
- 可标记还款状态（待还款/已结清）
- 示例：记录借给朋友的5000元

#### 还款管理
- 记录收回的借款
- 自动关联原始借款记录
- 示例：记录朋友归还的3000元

### 3.2 分类管理
- 系统默认分类：工资、餐饮、购物等
- 自定义分类：通过"管理分类"菜单添加
- 分类颜色区分：收入绿色，支出粉色

### 3.3 统计分析
- **收支趋势**：按时间查看资金流动
- **分类占比**：饼图显示各类别占比
- **借款还款**：详细追踪借款状态

### 3.4 数据安全
- **自动备份**：每小时自动备份数据
- **手动备份**：通过菜单随时备份
- **数据恢复**：从备份文件恢复

---

## 4. 专业配置 <a name="专业配置"></a>

### 4.1 数据库配置
- 主数据库：`finance_master.db`（存储用户信息）
- 用户数据库：`finance_[用户名].db`（存储交易数据）

### 4.2 备份策略
```python
# 自动备份设置代码片段
self.backup_timer = QTimer()
self.backup_timer.timeout.connect(self.auto_backup)
self.backup_timer.start(3600000)  # 每小时自动备份一次
```

### 4.3 性能优化
- 数据库索引优化
- 批量操作减少IO
- 懒加载技术

---

## 5. 技术架构 <a name="技术架构"></a>

### 5.1 系统架构图
```
用户界面层 (PyQt5)
    ↓
业务逻辑层 (Python)
    ↓
数据访问层 (SQLite)
```

### 5.2 核心技术
- **PyQt5**：跨平台GUI框架
- **SQLite**：轻量级数据库
- **pypinyin**：中文拼音转换

### 5.3 设计模式
- MVC模式分离界面与逻辑
- 单例模式管理数据库连接
- 观察者模式实现数据同步

---

## 6. 版本更新 <a name="版本更新"></a>

### 当前版本：2.13.0 (2025-05-18)

#### 最新更新：
- 新增余额自动计算功能
- 优化借款还款关联逻辑
- 增强数据备份机制

#### 历史版本：
| 版本号 | 发布日期 | 主要更新 |
|--------|----------|----------|
| 2.12.0 | 2025-04-15 | 新增多用户支持 |
| 2.11.0 | 2025-03-10 | 优化统计分析图表 |

---

## 7. 常见问题 <a name="常见问题"></a>

**Q1: 如何迁移数据到新电脑？**
A: 复制整个程序目录和backups文件夹即可

**Q2: 分类可以导出吗？**
A: 目前不支持直接导出，但可以从数据库文件导出

**Q3: 最大支持多少条记录？**
A: 理论上无限制，实测百万级记录运行流畅

---

## 8. 安全与隐私 <a name="安全与隐私"></a>

### 8.1 数据安全
- 本地存储，不上传云端
- 数据库加密可选（需自行配置）

### 8.2 隐私保护
- 不收集任何用户信息
- 备份文件也存储在本地

---

## 9. 高级技巧 <a name="高级技巧"></a>

### 9.1 快速搜索技巧
- 使用拼音首字母搜索：输入"gw"可找到"购物"
- 组合搜索："餐饮 2025-05"可查当月餐饮支出

### 9.2 键盘快捷键
- Ctrl+Z：撤销操作
- F5：刷新数据

### 9.3 数据导出
1. 使用SQLite浏览器打开数据库文件
2. 导出为CSV/Excel格式

---

## 10. 开发者指南 <a name="开发者指南"></a>

### 10.1 代码结构
```python
class FinanceApp(QMainWindow):  # 主应用类
class LoginDialog(QDialog):    # 登录对话框
class ProjectInfo:             # 项目元数据
class MacaronColors:           # 颜色定义
```

### 10.2 扩展开发
1. 新增交易类型：
```python
self.type_combo.addItems(["收入", "支出", "借款", "还款", "投资"])
```

2. 添加统计图表：
```python
# 在update_statistics方法中添加新图表类型
```

### 10.3 贡献指南
1. Fork项目仓库
2. 创建特性分支
3. 提交Pull Request

---

**温馨提示**：本系统为开源项目，欢迎提交改进建议！
访问 [GitHub项目](https://github.com/duma520) 获取最新版本
